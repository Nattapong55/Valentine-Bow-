<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ñ‡∏∂‡∏á‡πÇ‡∏ö üíñ</title>

<style>
body {
    margin: 0;
    font-family: "Prompt", sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #ff9a9e, #fecfef);
    overflow: hidden;
}

.container {
    margin-top: 40px;
}

img {
    width: 220px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

h1 {
    color: white;
    font-size: 28px;
}

button {
    padding: 14px 26px;
    font-size: 18px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    margin: 10px;
}

#loveBtn {
    background: #ff4d6d;
    color: white;
}

#noBtn {
    background: white;
    color: #ff4d6d;
    position: relative;
}

input {
    padding: 12px;
    border-radius: 10px;
    border: none;
    width: 220px;
    text-align: center;
    font-size: 16px;
}

#message {
    color: yellow;
    font-size: 22px;
    margin-top: 10px;
    display: none;
}
</style>
</head>

<body>

<div class="container">

    <img src="bow.jpg" alt="Bow">

    <h1>‡πÇ‡∏ö‡∏£‡∏±‡∏Å‡∏û‡∏µ‡πà‡πÑ‡∏´‡∏° ‚ù§Ô∏è</h1>

    <input id="answerInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö..." />
    <br><br>

    <button id="loveBtn">‡∏£‡∏±‡∏Å üíñ</button>
    <button id="noBtn">‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å üòù</button>

    <div id="message">‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏´‡∏£‡∏≠‡∏Å üòù</div>

</div>

<audio id="bgMusic" src="music.mp3"></audio>

<audio id="boing">
<source src="https://www.soundjay.com/button/beep-07.wav" type="audio/wav">
</audio>

<script type="module">

// ================= FIREBASE =================
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  databaseURL: "YOUR_DB",
  projectId: "YOUR_ID",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_MSG",
  appId: "YOUR_APP"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ================= ELEMENT =================
const loveBtn = document.getElementById("loveBtn");
const noBtn = document.getElementById("noBtn");
const music = document.getElementById("bgMusic");
const boing = document.getElementById("boing");
const input = document.getElementById("answerInput");
const message = document.getElementById("message");


// ================= ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î =================
function createHeart() {
    const heart = document.createElement("div");
    heart.innerHTML = "üíñ";
    heart.style.position = "fixed";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.top = window.innerHeight + "px";
    heart.style.fontSize = (20 + Math.random() * 40) + "px";
    heart.style.animation = "floatUp 3s linear forwards";
    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 3000);
}

const style = document.createElement('style');
style.innerHTML = `
@keyframes floatUp {
  to {
    transform: translateY(-100vh);
    opacity: 0;
  }
}`;
document.head.appendChild(style);


// ================= ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏±‡∏Å =================
loveBtn.onclick = () => {

    music.play().catch(()=>{});

    for(let i=0;i<40;i++){
        setTimeout(createHeart, i*80);
    }

    const text = input.value || "‡∏£‡∏±‡∏Å";

    push(ref(db, "answers"), {
        text: text,
        time: Date.now()
    });

    alert("‡πÄ‡∏¢‡πâ üíñ ‡∏£‡∏π‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏Å");
};


// ================= ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πà‡∏£‡∏±‡∏Å‡∏õ‡∏±‡πà‡∏ô =================

let speed = 800;

function moveButton() {

    const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
    const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);

    noBtn.style.position = "absolute";
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    boing.play();

    message.style.display = "block";

    if(speed > 100){
        speed -= 80;
    }
}

noBtn.addEventListener("mouseover", moveButton);
noBtn.addEventListener("click", moveButton);


// ‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ
setInterval(() => {
    moveButton();
}, speed);


</script>

</body>
</html>
